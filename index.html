<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loading RP</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: black;
    font-family: Arial, Helvetica, sans-serif;
}

/* ===== BACKGROUND ===== */
.background {
    position: absolute;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    transition: opacity 1.5s ease-in-out;
}
#bg1 { opacity: 1; }
#bg2 { opacity: 0; }

/* ===== OVERLAY ===== */
.overlay {
    position: absolute;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        rgba(0,0,0,0.25),
        rgba(0,0,0,0.75)
    );
}

/* ===== DATE / HEURE ===== */
#datetime {
    position: fixed;
    top: 20px;
    left: 30px;
    color: rgba(255,255,255,0.75);
    z-index: 10;
}
#date {
    font-size: 14px;
}
#time {
    font-size: 16px;
    font-weight: 600;
}

/* ===== PROFIL STEAM ===== */
#steam-profile {
    position: fixed;
    top: 60px;
    left: 30px;
    display: flex;
    align-items: center;
    gap: 12px;
    color: white;
    z-index: 10;
}

#steam-avatar {
    width: 48px;
    height: 48px;
    border-radius: 4px;
    background: #222;
}

#steam-name {
    font-size: 26px;
    font-weight: 700;
}

/* ===== ASTUCE ===== */
.tip-container {
    position: absolute;
    bottom: 6%;
    left: 3%;
    max-width: 70%;
    padding: 20px 24px;
    background: rgba(0, 0, 0, 0.75);
    color: white;
    font-size: 22px;
    opacity: 0;
    animation: tipFadeIn 1.5s ease forwards;
}

.tip-title {
    font-size: 34px;
    font-weight: 800;
    display: block;
    margin-bottom: 8px;
}

@keyframes tipFadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
</style>
</head>

<body>

<!-- Backgrounds -->
<div id="bg1" class="background"></div>
<div id="bg2" class="background"></div>

<!-- Date / Heure -->
<div id="datetime">
    <div id="date"></div>
    <div id="time"></div>
</div>

<!-- Profil Steam -->
<div id="steam-profile">
    <img id="steam-avatar" src="" alt="Avatar">
    <div id="steam-name">Chargement...</div>
</div>

<!-- Overlay -->
<div class="overlay"></div>

<!-- Astuce -->
<div class="tip-container" id="tipBox">
    <span class="tip-title">ASTUCE</span>
    <span id="tipText"></span>
</div>

<script>
/* ===== DATE & HEURE ===== */
function updateDateTime() {
    const now = new Date();

    const day = String(now.getDate()).padStart(2, '0');
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const year = String(now.getFullYear()).slice(-2);

    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');

    document.getElementById("date").textContent = `${day}/${month}/${year}`;
    document.getElementById("time").textContent = `${hours}:${minutes}`;
}
updateDateTime();
setInterval(updateDateTime, 1000);

/* ===== STEAM PROFIL (API XML) ===== */
const params = new URLSearchParams(window.location.search);
const steamid = params.get("steamid");

if (steamid && !steamid.includes("STEAM_")) {
    fetch(`https://api.allorigins.win/raw?url=https://steamcommunity.com/profiles/${steamid}?xml=1`)
        .then(res => res.text())
        .then(str => new DOMParser().parseFromString(str, "text/xml"))
        .then(data => {
            const name = data.querySelector("steamID")?.textContent;
            const avatar = data.querySelector("avatarMedium")?.textContent;

            if (name) {
                document.getElementById("steam-name").textContent = name;
            }
            if (avatar) {
                document.getElementById("steam-avatar").src = avatar;
            }
        })
        .catch(() => {
            document.getElementById("steam-name").textContent = "Joueur";
        });
} else {
    document.getElementById("steam-name").textContent = "Joueur";
}

/* ===== SLIDES ===== */
const slides = [
    {
        image: "images/img1.jpg",
        tip: "Vous pouvez fabriquer de la weed avec les appareils disponibles au supermarché."
    },
    {
        image: "images/img2.jpg",
        tip: "Certaines actions sont limitées selon l’heure ou la zone."
    },
    {
        image: "images/img3.jpg",
        tip: "Un bon équipement fait souvent la différence en situation critique."
    }
];

let index = 0;
let showBg1 = true;

const bg1 = document.getElementById("bg1");
const bg2 = document.getElementById("bg2");
const tipText = document.getElementById("tipText");
const tipBox = document.getElementById("tipBox");

function changeSlide() {
    const slide = slides[index];

    tipBox.style.opacity = 0;
    setTimeout(() => {
        tipText.textContent = slide.tip;
        tipBox.style.animation = "none";
        tipBox.offsetHeight;
        tipBox.style.animation = "tipFadeIn 1.5s ease forwards";
    }, 300);

    if (showBg1) {
        bg2.style.backgroundImage = `url('${slide.image}')`;
        bg2.style.opacity = 1;
        bg1.style.opacity = 0;
    } else {
        bg1.style.backgroundImage = `url('${slide.image}')`;
        bg1.style.opacity = 1;
        bg2.style.opacity = 0;
    }

    showBg1 = !showBg1;
    index = (index + 1) % slides.length;
}

changeSlide();
setInterval(changeSlide, 6000);
</script>

</body>
</html>
